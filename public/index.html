<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesti√≥n de Al√©rgenos - Sistema de Buffet</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <div class="text-center mb-8">
            <div class="flex items-center justify-center mb-4">
                <div class="bg-blue-600 text-white rounded-full p-3 mr-4">
                    <span class="text-2xl">üçΩÔ∏è</span>
                </div>
                <div>
                    <h1 class="text-4xl font-bold text-gray-800 mb-2">Gesti√≥n de Al√©rgenos</h1>
                    <p class="text-gray-600">Sistema de Buffet</p>
                </div>
                <div class="ml-auto text-right">
                    <div class="flex items-center space-x-2 text-sm text-green-600">
                        <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                        <span>Sistema Activo</span>
                    </div>
                    <div class="text-xs text-gray-500" id="currentDate"></div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
<div class="main-container-modern">
    <!-- Header Premium -->
    <div class="header-premium">
        <div class="header-content">
            <div class="logo-section">
                <div class="logo-circle">
                    <span class="logo-icon">üçΩÔ∏è</span>
                </div>
                <div class="logo-text">
                    <h1 class="system-title">Gesti√≥n de Al√©rgenos</h1>
                    <p class="system-subtitle">Sistema Profesional de Buffet</p>
                </div>
            </div>
            <div class="status-section">
                <div class="status-indicator">
                    <div class="status-dot"></div>
                    <span class="status-text">Sistema Activo</span>
                </div>
                <div class="date-time" id="currentDateTime"></div>
            </div>
        </div>
    </div>

    <!-- Dashboard Grid -->
    <div class="dashboard-grid">
        
        <!-- Column 1: Input Panel -->
        <div class="input-panel">
            <div class="panel-card">
                <div class="panel-header">
                    <div class="panel-icon">üé§</div>
                    <h2 class="panel-title">Registrar Nuevo Plato</h2>
                </div>
                
                <div class="input-section">
                    <!-- Voice Recording -->
                    <div class="voice-section">
                        <label class="input-label">Grabaci√≥n de Voz</label>
                        <div class="record-container">
                            <button id="recordBtn" class="record-btn-modern">
                                <span id="recordIcon" class="record-icon">üé§</span>
                                <span id="recordText" class="record-text">Mantener para Grabar</span>
                            </button>
                        </div>
                        <div id="recordingStatus" class="recording-status hidden">
                            <div class="recording-indicator">
                                <div class="recording-pulse"></div>
                                <span>Grabando... Suelta para procesar</span>
                            </div>
                        </div>
                    </div>

                    <!-- Text Input -->
                    <div class="text-section">
                        <label class="input-label">Descripci√≥n del Plato</label>
                        <textarea 
                            id="dishInput" 
                            placeholder="Ej: Paella valenciana con gambas, mejillones y pollo..."
                            class="text-input-modern"
                        ></textarea>
                    </div>

                    <!-- Actions -->
                    <div class="action-section">
                        <button id="analyzeBtn" class="btn-primary-modern">
                            <span class="btn-icon">üß†</span>
                            <span>Analizar con IA</span>
                        </button>
                        <button id="clearBtn" class="btn-secondary-modern">
                            <span class="btn-icon">üßπ</span>
                            <span>Limpiar</span>
                        </button>
                    </div>

                    <!-- Chef Info -->
                    <div class="chef-section">
                        <label class="input-label-small">Chef:</label>
                        <input 
                            type="text" 
                            id="chefName" 
                            value="Chef Principal"
                            class="chef-input"
                        >
                    </div>
                </div>
            </div>

            <!-- Results Panel -->
            <div class="results-panel">
                <!-- Loading -->
                <div id="loading" class="loading-section hidden">
                    <div class="loading-spinner-modern"></div>
                    <p class="loading-text">üß† Analizando plato con IA...</p>
                </div>

                <!-- Results -->
                <div id="results" class="results-content hidden">
                    <div class="results-header">
                        <h3 class="results-title">
                            <span class="results-icon">üîç</span>
                            Resultados del An√°lisis
                        </h3>
                        <div class="analysis-badge">
                            <div class="badge-dot"></div>
                            <span>An√°lisis Completado</span>
                        </div>
                    </div>

                    <!-- Dish Info -->
                    <div class="dish-info-section">
                        <h4 class="section-subtitle">Plato Identificado</h4>
                        <div id="dishResult" class="dish-result-card">
                            <!-- Content populated by JavaScript -->
                        </div>
                    </div>

                    <!-- Allergens -->
                    <div class="allergens-section">
                        <h4 class="section-subtitle">Al√©rgenos Detectados</h4>
                        <div id="allergensList" class="allergens-grid">
                            <!-- Content populated by JavaScript -->
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="action-buttons-modern">
                        <button id="pdfSimpleBtn" class="action-btn action-btn-blue">
                            <span class="action-icon">üìã</span>
                            <span class="action-text">PDF Simple</span>
                        </button>
                        <button id="beautifulLabelBtn" class="action-btn action-btn-gold">
                            <span class="action-icon">‚ú®</span>
                            <span class="action-text">Etiqueta Bonita</span>
                        </button>
                        <button id="printBtn" class="action-btn action-btn-green">
                            <span class="action-icon">üñ®Ô∏è</span>
                            <span class="action-text">Imprimir</span>
                        </button>
                        <button id="newDishBtn" class="action-btn action-btn-purple">
                            <span class="action-icon">‚ûï</span>
                            <span class="action-text">Nuevo Plato</span>
                        </button>
                    </div>
                </div>

                <!-- Error Message -->
                <div id="errorMessage" class="error-message hidden">
                    <div class="error-content">
                        <span class="error-icon">‚ö†Ô∏è</span>
                        <div class="error-text">
                            <strong>Error:</strong> 
                            <span id="errorText"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Column 2: Activity Panel -->
        <div class="activity-panel">
            <!-- Today's Dishes -->
            <div class="activity-card">
                <div class="activity-header">
                    <h3 class="activity-title">
                        <span class="activity-icon">üìã</span>
                        Platos de Hoy
                    </h3>
                    <div class="dish-counter" id="dishCount">0 platos</div>
                </div>
                <div id="todayDishes" class="dishes-list">
                    <div class="empty-state">
                        <div class="empty-icon">üçΩÔ∏è</div>
                        <p class="empty-text">No hay platos registrados hoy</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Column 3: Stats & Config Panel -->
        <div class="sidebar-panel">
            <!-- Stats -->
            <div class="stats-card">
                <div class="stats-header">
                    <h3 class="stats-title">
                        <span class="stats-icon">üìä</span>
                        Estad√≠sticas en Tiempo Real
                    </h3>
                </div>
                <div class="stats-grid">
                    <div class="stat-item stat-primary">
                        <div class="stat-number" id="statsAnalyzed">0</div>
                        <div class="stat-label">Platos Analizados</div>
                    </div>
                    <div class="stat-item stat-success">
                        <div class="stat-number" id="statsLabels">0</div>
                        <div class="stat-label">Etiquetas Generadas</div>
                    </div>
                    <div class="stat-item stat-warning">
                        <div class="stat-number" id="statsAllergens">0</div>
                        <div class="stat-label">Al√©rgenos Detectados</div>
                    </div>
                </div>
            </div>

            <!-- Active Chef -->
            <div class="chef-card">
                <div class="chef-header">
                    <h3 class="chef-title">
                        <span class="chef-icon">üë®‚Äçüç≥</span>
                        Chef Activo
                    </h3>
                </div>
                <div class="chef-info">
                    <div class="chef-avatar">
                        <span class="avatar-icon">üë®‚Äçüç≥</span>
                    </div>
                    <div class="chef-details">
                        <div class="chef-name" id="activeChef">Chef Principal</div>
                        <div class="chef-role">Chef Principal</div>
                    </div>
                    <div class="chef-status">
                        <div class="status-dot-small"></div>
                    </div>
                </div>
            </div>

            <!-- Printer Config -->
            <div class="config-card">
                <div class="config-header">
                    <h3 class="config-title">
                        <span class="config-icon">‚öôÔ∏è</span>
                        Configuraci√≥n
                    </h3>
                </div>
                <div class="config-content">
                    <div class="config-group">
                        <label class="config-label">Impresora</label>
                        <input type="text" id="printerName" value="default" class="config-input">
                    </div>
                    <div class="config-group">
                        <label class="config-label">Papel</label>
                        <select id="paperSize" class="config-select">
                            <option value="A4">A4 (Est√°ndar)</option>
                            <option value="58mm">58mm (T√©rmica)</option>
                            <option value="80mm">80mm (T√©rmica)</option>
                        </select>
                    </div>
                    <div class="config-group">
                        <label class="config-label">Densidad</label>
                        <select id="printDensity" class="config-select">
                            <option value="Alta">Alta</option>
                            <option value="Media">Media</option>
                            <option value="Baja">Baja</option>
                        </select>
                    </div>
                    <div class="config-checkbox">
                        <input type="checkbox" id="autoPrint">
                        <label for="autoPrint">Impresi√≥n Autom√°tica</label>
                    </div>
                    <button id="savePrinterConfig" class="config-save-btn">
                        <span>üíæ</span>
                        <span>Guardar</span>
                    </button>
                    <div class="config-status" id="printerStatus">
                        ‚úÖ Configurado - default
                    </div>
                </div>
            </div>

            <!-- Allergen Guide -->
            <div class="guide-card">
                <div class="guide-header">
                    <h3 class="guide-title">
                        <span class="guide-icon">üìö</span>
                        Gu√≠a R√°pida
                    </h3>
                </div>
                <div class="guide-content">
                    <div class="guide-items">
                        <div class="guide-item">
                            <span class="guide-emoji">üåæ</span>
                            <span class="guide-name">Gluten</span>
                        </div>
                        <div class="guide-item">
                            <span class="guide-emoji">ü¶ê</span>
                            <span class="guide-name">Crust√°ceos</span>
                        </div>
                        <div class="guide-item">
                            <span class="guide-emoji">ü•ö</span>
                            <span class="guide-name">Huevos</span>
                        </div>
                        <div class="guide-item">
                            <span class="guide-emoji">üêü</span>
                            <span class="guide-name">Pescado</span>
                        </div>
                        <div class="guide-item">
                            <span class="guide-emoji">ü•ú</span>
                            <span class="guide-name">Cacahuetes</span>
                        </div>
                        <div class="guide-item">
                            <span class="guide-emoji">ü•õ</span>
                            <span class="guide-name">L√°cteos</span>
                        </div>
                    </div>
                    <button class="guide-more-btn">
                        Ver todos los 14 al√©rgenos ‚Üí
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

                <!-- Today's Dishes -->
                <div class="mt-8 bg-white rounded-xl shadow-xl p-8">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-xl font-bold text-gray-800 flex items-center">
                            <span class="mr-2">üìã</span>
                            Platos de Hoy
                        </h3>
                        <div class="text-sm text-gray-500" id="dishCount">0 platos</div>
                    </div>
                    <div id="todayDishes" class="space-y-4">
                        <p class="text-gray-500 text-center py-8">No hay platos registrados hoy</p>
                    </div>
                </div>
            </div>

            <!-- Right Column: Stats and Config -->
            <div class="space-y-8">
                <!-- Stats -->
                <div class="bg-white rounded-xl shadow-xl p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
                        <span class="mr-2">üìä</span>
                        Estad√≠sticas del D√≠a
                    </h3>
                    <div class="space-y-4">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Platos Analizados</span>
                            <span id="statsAnalyzed" class="text-2xl font-bold text-blue-600">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Etiquetas Generadas</span>
                            <span id="statsLabels" class="text-2xl font-bold text-teal-600">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Al√©rgenos Detectados</span>
                            <span id="statsAllergens" class="text-2xl font-bold text-red-600">0</span>
                        </div>
                    </div>
                </div>

                <!-- Active Chef -->
                <div class="bg-white rounded-xl shadow-xl p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                        <span class="mr-2">üë®‚Äçüç≥</span>
                        Chef Activo
                    </h3>
                    <div class="flex items-center">
                        <div class="bg-yellow-100 p-2 rounded-full mr-3">
                            <span class="text-xl">üë®‚Äçüç≥</span>
                        </div>
                        <div>
                            <div class="font-bold" id="activeChef">Chef Principal</div>
                            <div class="text-sm text-gray-500">Chef Principal</div>
                        </div>
                    </div>
                </div>

                <!-- Printer Config -->
                <div class="bg-white rounded-xl shadow-xl p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
                        <span class="mr-2">‚öôÔ∏è</span>
                        Configuraci√≥n de Impresora
                    </h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Nombre de la Impresora</label>
                            <input type="text" id="printerName" value="default" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Tama√±o del Papel</label>
                            <select id="paperSize" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="A4">A4 (Est√°ndar)</option>
                                <option value="58mm">58mm (T√©rmica)</option>
                                <option value="80mm">80mm (T√©rmica)</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Densidad de Impresi√≥n</label>
                            <select id="printDensity" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="Alta">Alta</option>
                                <option value="Media">Media</option>
                                <option value="Baja">Baja</option>
                            </select>
                        </div>
                        <div class="flex items-center">
                            <input type="checkbox" id="autoPrint" class="mr-2">
                            <label for="autoPrint" class="text-sm text-gray-700">Impresi√≥n Autom√°tica</label>
                        </div>
                        <button id="savePrinterConfig" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-all duration-300">
                            üíæ Guardar Configuraci√≥n
                        </button>
                        <div class="text-xs text-gray-500 text-center" id="printerStatus">
                            Estado: Impresora configurada - default
                        </div>
                    </div>
                </div>

                <!-- Allergen Guide -->
                <div class="bg-white rounded-xl shadow-xl p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                        <span class="mr-2">üìö</span>
                        Gu√≠a de Al√©rgenos UE
                    </h3>
                    <div class="grid grid-cols-1 gap-2 text-sm" id="allergenGuide">
                        <div class="flex items-center space-x-2 p-2 bg-gray-50 rounded">
                            <span>üåæ</span>
                            <span>Cereales con gluten</span>
                        </div>
                        <div class="flex items-center space-x-2 p-2 bg-gray-50 rounded">
                            <span>ü¶ê</span>
                            <span>Crust√°ceos</span>
                        </div>
                        <div class="flex items-center space-x-2 p-2 bg-gray-50 rounded">
                            <span>ü•ö</span>
                            <span>Huevos</span>
                        </div>
                        <div class="flex items-center space-x-2 p-2 bg-gray-50 rounded">
                            <span>üêü</span>
                            <span>Pescado</span>
                        </div>
                        <div class="flex items-center space-x-2 p-2 bg-gray-50 rounded">
                            <span>ü•ú</span>
                            <span>Cacahuetes</span>
                        </div>
                        <div class="flex items-center space-x-2 p-2 bg-gray-50 rounded">
                            <span>ü•õ</span>
                            <span>L√°cteos</span>
                        </div>
                    </div>
                    <div class="text-center mt-3">
                        <span class="text-xs text-gray-500">Y 8 al√©rgenos m√°s seg√∫n normativa UE</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
